<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>elektrophon</title>

    
    <link rel="stylesheet" href="http://example.org/scss/bulma.7c748a6409b19eeb748e63736d82184ba96934b02832305f601a85ad4c690d10.css">

    
    
    
    

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" />
    <script defer src="http://example.org/js/bundle.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
              
              
              delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
              
              throwOnError : false
            });
        });
      </script>
</head>
<body>
<style scoped>
  .hero_title {
      no-repeat center center; 
      background-size: cover; 
      
      
        background-image: url(http://example.org/images/arbeitsplatz-hero_landscape_hu1f7acf27b15aaa1abab8b7297173a139_72783_1280x0_resize_q75_box.jpg); 
      
      
  }
  @media (max-width: 980px) {
      .hero {
          background-image: url(http://example.org//arbeitsplatz-hero_portrait.jpg);
      }
  }
</style>


<section class="hero is-fullheight hero_title">
  
  
  
  <div class="hero-head hero-darken">
    <nav class="navbar">
      <div class="container">
        <div class="navbar-brand">
          <a href="http://example.org//" class="navbar-item title is-size-3 has-text-white">elektrophon</a>
          <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navMenu">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
          </a>
        </div>
        <div class="navbar-menu" id="navMenu">
          <div class="navbar-end">
            
            <a class="navbar-item has-text-white" href="/categories/article">article</a>
            
            <a class="navbar-item has-text-white" href="/categories/module">module</a>
            
            <a class="navbar-item has-text-white" href="http://example.org//about/"><span>about</span></a>
          </div>
        </div>
      </div>
    </nav>
  </div>

  <div class="hero-body hero-darken">
    <div class="columns is-multiline">
      
      
      

      
      <div class="column is-8 is-offset-2">
        
        <h1 class="title is-size-3 has-text-white">arbeitsplatz</h1>
        
      </div>
      
      <div class="column is-8 is-offset-2">
        
        <p class="has-text-white is-size-4 has-text-weight-semibold">All the necessary applications for developing the elektrophon.</p>
        
      </div>
    </div>
  </div>
</section><section class="section">
      <div class="columns is-multiline">

<div class="column is-12">
    <div class="container has-text-centered">
        <div class="content has-text-centered is-size-5 is-italic has-text-weight-medium">
            The elektrophon is developed with a continuous development lifecycle. The circuits for the modules and articles are first simulated with spice. Jupyter notebooks are used to edit and run the simulations. In these notebooks also the images and other content is created. To run the notebooks you need to install the required software. Here is a list of all the needed software and tools.
        </div>
    </div>
</div>


<div class="column is-12">
    <div class="container">
        <div class="content">
            


<div class="column is-12">
<div class="container">
<div class="content"><h1>essential software</h1>
<p>All the schematics and PCB are created in Kicad. The documentation is based on jupyter notebooks. The jupyter notebooks run simulations and create plots of the results. Also other</p>
<p>The software used to create the notebooks, schematics and PCB's.</p>
<ul>
<li><a href="https://kicad-pcb.org/">KiCad EDA</a> A Cross Platform and Open Source Electronics Design Automation Suite.</li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a> free code editor from microsoft. jupyter notebooks can be executed and previewed in code.</li>
<li><a href="http://ngspice.sourceforge.net/index.html">ngspice</a> is an open source spice simulator for electric and electronic circuits.</li>
<li><a href="https://pyspice.fabrice-salvaire.fr/releases/v1.4/overview.html">PySpice</a> is an open source Python module which provides a Python interface to the Ngspice and Xyce circuit simulators.</li>
<li><a href="https://jupyter.org/">Jupyter</a> interactive Python notebook.</li>
<li><a href="https://scons.org/">Scons</a> A software construction tool</li>
</ul>

</div>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><p>In some linux distributions the open source version of Visual Studio Code is installed. With this version not all plugins or not the latest versions are available for installation. To get the plugins at the latest version, the official Microsoft Code has to be installed.</p>
<p>Install the Microsoft version of code in archlinux:</p>

</div>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">git clone https://aur.archlinux.org/visual-studio-code-bin.git  
<span class="nb">cd</span> visual-studio-code-bin 
makepkg -si</code></pre></td></tr></table>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><p>and install the python extension:</p>

</div>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">code --install-extension ms-python.python  </code></pre></td></tr></table>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><h1>kicad configuration</h1>
<p>In KiCad the libraries have to be added. 
The Symbols, Footprints and templates can be found in $(ELEKTROPHON)/lib/kicad</p>

</div>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><h2>python packages</h2>
<p>The notebooks and simulations require some python packages. These packages can be installed with conda.</p>
<ul>
<li><a href="https://www.anaconda.com/">miniconda</a> Manage python packages and environments.</li>
</ul>
<p>To install conda on your operating systems follow the official guides.</p>
<ul>
<li><a href="https://conda.io/projects/conda/en/latest/user-guide/install/windows.html">windows</a></li>
<li><a href="https://conda.io/projects/conda/en/latest/user-guide/install/linux.html">linux</a></li>
<li><a href="https://conda.io/projects/conda/en/latest/user-guide/install/macos.html">macOS</a></li>
</ul>

</div>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><p>For installing all the required packages create a conda environment with the <a href="https://github.com/spielhuus/elektrophon/blob/master/environment.yml">environment.yml</a> file in the root folder of the elektrophon github repository.</p>

</div>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">conda env create -f environment.yml
conda activate elektrophon</code></pre></td></tr></table>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><p>The following packages will be installed:</p>
<ul>
<li><a href="https://matplotlib.org/">Matplotlib</a> is a comprehensive library for creating static, animated, and interactive visualizations in Python.</li>
<li><a href="https://numpy.org/">NumPy</a> The fundamental package for scientific computing with Python.</li>
<li><a href="https://www.scipy.org/">SciPy</a> is a Python-based ecosystem of open-source software for mathematics, science, and engineering.</li>
<li><a href="https://www.sympy.org/en/index.html">SymPy</a> is a Python library for symbolic mathematics.</li>
<li><a href="https://pandas.pydata.org/">pandas</a> is a fast, powerful, flexible and easy to use open source data analysis and manipulation tool.</li>
<li><a href="https://pyspice.fabrice-salvaire.fr/">PySpice</a> Simulate electronic circuit using Python and the Ngspice / Xyce simulators</li>
<li><a href="https://schemdraw.readthedocs.io/en/latest/index.html">SchemDraw</a> Schemdraw is a Python package for producing high-quality electrical circuit schematic diagrams. </li>
<li><a href="https://github.com/jbn/itikz">itikz</a> Cell magic for PGF/TikZ-to-SVG rendering in Jupyter.</li>
</ul>

</div>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><p>Itikz requires additional native packages (example in arch linux)</p>

</div>
</div>
</div><pre><code class="language-shell-session" data-lang="shell-session">pacman -Sy install texlive-bin texlive-latex-extra texlive-pictures texlive-science imagemagick pdf2svg</code></pre>
<div class="column is-12">
<div class="container">
<div class="content"><h1>STM32 development</h1>
<p>STM32 firmare is developed in visual studio code. The following extensions needs to be installed.</p>

</div>
</div>
</div><pre><code class="language-shell-session" data-lang="shell-session">code --install-extension ms-vscode.cpptools 
code --install-extension marus25.cortex-debug       
code --install-extension dan-c-underwood.arm   
code --install-extension zixuanwang.linkerscript   </code></pre>
<div class="column is-12">
<div class="container">
<div class="content"><p>install the development tools in arch linux:</p>
<div class="highlight"><pre><span></span>sudo pacman -Sy openocd stlink arm-none-eabi-gcc arm-none-eabi-gdb arm-none-eabi-newlib
</pre></div>
<h2>trouble shooting</h2>
<h3>wrong idcode</h3>
<p>for some cheap STM32 boards from china the wrong processor id is returned. These are most likely clones of the orginial chip.</p>

<pre><code>Warn : UNEXPECTED idcode: 0x2ba01477
Error: expected 1 of 1: 0x1ba01477</code></pre>
<p>replace the chip id in the st-link description file.</p>
<h3>locked chip</h3>
<p>When the firmware is installed without the SWD debug option, the chip is locked and no other firmware can be installed.</p>
<p>check if the chip is locked:</p>

<pre><code>st-info --probe

Found 1 stlink programmers
 serial: 533f6b064975524918500267
openocd: "\x53\x3f\x6b\x06\x49\x75\x52\x49\x18\x50\x02\x67"
  flash: 65536 (pagesize: 1024)
   sram: 20480
 chipid: 0x0410
  descr: F1 Medium-density device</code></pre>
<p>when chip is locked st-info --probe return flash: 0.</p>
<p>unlock the chip using openocd:</p>

<pre><code>openocd -f interface/stlink-v2.cfg \
   -f target/stm32f1x.cfg \       
   -c "init; reset halt; stm32f1x unlock 0; reset halt; exit"</code></pre>

</div>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><h1>web page</h1>
<p>If you want to build the web page on your own you can use the <a href="https://github.com/spielhuus/elektrophon/tree/master/docker">docker image</a>.</p>
<ul>
<li><a href="https://gohugo.io/">Hugo</a> Transform your plain text into static websites and blogs.</li>
<li><a href="https://bulma.io/">Bulma</a> Bulma is a free, open source framework that provides ready-to-use frontend components that you can easily combine to build responsive web interfaces.</li>
<li><a href="https://github.com/INTI-CMNB/kibot">KiBot</a> is a program which helps you to generate the fabrication and documentation files for your KiCad projects</li>
<li><a href="">Scons</a></li>
<li>[sconstool-kicad]</li>
<li>[sconstool-notebook]</li>
<li><a href="https://github.com/nextapps-de/spotlight">spotlight</a> Lightbox gallery library</li>
<li><a href="https://katex.org/">$\KaTeX$</a> Fast math typesetting library for the web.</li>
</ul>

</div>
</div>
</div>
<div class="column is-12">
<div class="container">
<div class="content"><h1>other software</h1>
<ul>
<li><a href="https://www.audacityteam.org/">audacity</a> Free, open source, cross-platform audio software</li>
</ul>

</div>
</div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
	let cardToggles = document.getElementsByClassName('card-header-icon');
	for (let i = 0; i < cardToggles.length; i++) {
		cardToggles[i].addEventListener('click', e => {
			e.currentTarget.parentElement.parentElement.childNodes[3].classList.toggle('is-hidden');
		});
	}
});
</script>





</html>

            
        </div>
    </div>
</div>
    
      </div>
    </section><footer class="footer">
    <div class="container">
        <div class="content has-text-centered">
            <div class="soc">
                <a href="http://example.org//feed.xml"><i style="font-size: 2em; color: Grey;" class="fas fa-rss"
                        aria-hidden="true"></i></a>
                <a href="//github.com/spielhuus/elektrophon"><i style="font-size: 2em; color: Grey;"
                        class="fab fa-github grey" aria-hidden="true"></i></a>
                <a href="//youtube.com"><i style="font-size: 2em; color: Grey;" class="fab fa-youtube grey"
                        aria-hidden="true"></i></a>
                <a rel="license" href="https://creativecommons.org/licenses/by/4.0/"
                    title="Creative Commons Attribution 4.0 International license">
                    <i style="font-size: 2em; color: Grey;" class="fab fa-creative-commons"></i>
                </a>
            </div>
            <p>
                Except where otherwise <a href="https://creativecommons.org/policies#license">noted</a>,
                content on this site is licensed under a <a href="https://creativecommons.org/licenses/by/4.0/"
                    rel="license">Creative Commons Attribution 4.0 International license</a>.<br>
            </p>
        </div>
    </div>
</footer>
</body>
</html>
